# AI ä¾§è¾¹æ èŠå¤© - æ–½å·¥è®¡åˆ’

> åˆ›å»ºæ—¶é—´: 2026-01-21
> çŠ¶æ€: âœ… Phase 1-3 å·²å®Œæˆ

## ğŸ“‹ æ¦‚è¿°

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| **ç›®æ ‡** | åœ¨ä¾§è¾¹æ å®ç°æŒä¹…åŒ– AI èŠå¤©é¢æ¿ |
| **ä¸å†…è”é¢æ¿åŒºåˆ«** | å†…è” = å¿«é€Ÿå•æ¬¡è¯¢é—®ï¼›ä¾§è¾¹æ  = æŒç»­å¯¹è¯ã€å†å²è®°å½• |
| **æŠ€æœ¯æ ˆ** | React + Zustand + OpenAI-compatible API |

---

## ğŸ“¦ Phase 1: çŠ¶æ€ç®¡ç†

| # | ä»»åŠ¡ | æ–‡ä»¶ | çŠ¶æ€ |
|---|------|------|------|
| 1.1 | åˆ›å»º aiChatStore | `src/store/aiChatStore.ts` | âœ… |
| 1.2 | å®šä¹‰æ¶ˆæ¯/å¯¹è¯ç±»å‹ | `src/types/index.ts` | âœ… |
| 1.3 | å®ç°æœ¬åœ°æŒä¹…åŒ– | `aiChatStore.ts` | âœ… |

---

## ğŸ¨ Phase 2: UI ç»„ä»¶

| # | ä»»åŠ¡ | æ–‡ä»¶ | çŠ¶æ€ |
|---|------|------|------|
| 2.1 | èŠå¤©é¢æ¿ä¸»ç»„ä»¶ | `src/components/ai/AiChatPanel.tsx` | âœ… |
| 2.2 | æ¶ˆæ¯æ°”æ³¡ç»„ä»¶ | `src/components/ai/ChatMessage.tsx` | âœ… |
| 2.3 | è¾“å…¥åŒºåŸŸç»„ä»¶ | `src/components/ai/ChatInput.tsx` | âœ… |
| 2.4 | å¯¹è¯åˆ—è¡¨ç»„ä»¶ | `src/components/ai/ConversationList.tsx` | âœ… (é›†æˆåœ¨ AiChatPanel) |

---

## ğŸ”— Phase 3: é›†æˆ

| # | ä»»åŠ¡ | æ–‡ä»¶ | çŠ¶æ€ |
|---|------|------|------|
| 3.1 | å¯ç”¨ä¾§è¾¹æ æŒ‰é’® | `Sidebar.tsx` | âœ… |
| 3.2 | æ·»åŠ  section è·¯ç”± | `Sidebar.tsx` | âœ… |
| 3.3 | æ›´æ–° SidebarSection ç±»å‹ | `settingsStore.ts` | âœ… |
| 3.4 | æ·»åŠ  i18n ç¿»è¯‘ | `locales/*/sidebar.json` | âœ… (en, zh-CN) |

---

## ğŸ§  Phase 4: æ™ºèƒ½åŠŸèƒ½

| # | ä»»åŠ¡ | æ–‡ä»¶ | çŠ¶æ€ |
|---|------|------|------|
| 4.1 | ç»ˆç«¯ä¸Šä¸‹æ–‡æ•è· | `aiChatStore.ts` | â¬œ |
| 4.2 | å¿«æ·æç¤ºæŒ‰é’® | `AiChatPanel.tsx` | â¬œ |
| 4.3 | Markdown æ¸²æŸ“ | `ChatMessage.tsx` | âœ… (ä»£ç å—æ”¯æŒ) |

---

## ğŸ“ æ•°æ®ç»“æ„è®¾è®¡

### ChatMessage

```typescript
interface ChatMessage {
  id: string;
  role: 'user' | 'assistant' | 'system';
  content: string;
  timestamp: number;
  context?: string;        // é™„å¸¦çš„ç»ˆç«¯ä¸Šä¸‹æ–‡
  isStreaming?: boolean;   // æ˜¯å¦æ­£åœ¨æµå¼ç”Ÿæˆ
}
```

### Conversation

```typescript
interface Conversation {
  id: string;
  title: string;           // è‡ªåŠ¨ç”Ÿæˆæˆ–ç”¨æˆ·å‘½å
  messages: ChatMessage[];
  createdAt: number;
  updatedAt: number;
  sessionId?: string;      // å…³è”çš„ç»ˆç«¯ä¼šè¯ï¼ˆå¯é€‰ï¼‰
}
```

### AiChatState

```typescript
interface AiChatState {
  conversations: Conversation[];
  activeConversationId: string | null;
  isLoading: boolean;
  error: string | null;
}
```

---

## ğŸ”€ ç”¨æˆ·æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»ä¾§è¾¹æ  AI æŒ‰é’®
â”œâ”€â”€ é¦–æ¬¡ä½¿ç”¨ â†’ è‡ªåŠ¨åˆ›å»ºæ–°å¯¹è¯
â””â”€â”€ æœ‰å†å²è®°å½• â†’ æ˜¾ç¤ºæœ€è¿‘å¯¹è¯
    â”‚
    â”œâ”€â”€ ç”¨æˆ·è¾“å…¥é—®é¢˜
    â”‚   â”œâ”€â”€ å¯é€‰ï¼šé™„åŠ ç»ˆç«¯ä¸Šä¸‹æ–‡
    â”‚   â””â”€â”€ å‘é€è¯·æ±‚
    â”‚       â””â”€â”€ æµå¼æ˜¾ç¤ºå“åº”
    â”‚
    â”œâ”€â”€ åˆ‡æ¢å¯¹è¯
    â”‚   â””â”€â”€ æ˜¾ç¤ºå†å²æ¶ˆæ¯
    â”‚
    â””â”€â”€ æ–°å»ºå¯¹è¯
        â””â”€â”€ æ¸…ç©ºå½“å‰ï¼Œå¼€å§‹æ–°å¯¹è¯
```

---

## ğŸ“ å®æ–½æ—¥å¿—

### 2026-01-21

- [ ] Phase 1.1: åˆ›å»º aiChatStore.ts
- [ ] Phase 1.2: æ·»åŠ ç±»å‹å®šä¹‰
- [ ] Phase 2.1: å®ç° AiChatPanel
- [ ] Phase 3.1: å¯ç”¨ä¾§è¾¹æ æŒ‰é’®

---

## âš ï¸ æ³¨æ„äº‹é¡¹

| é£é™© | ç¼“è§£æªæ–½ |
|------|----------|
| å¯¹è¯å†å²è¿‡å¤§ | é™åˆ¶æ¯ä¸ªå¯¹è¯æœ€å¤š 100 æ¡æ¶ˆæ¯ |
| API Key æœªé…ç½® | æ˜¾ç¤ºé…ç½®å¼•å¯¼ï¼Œå¤ç”¨è®¾ç½®é¡µé€»è¾‘ |
| æµå¼å“åº”ä¸­æ–­ | AbortController å–æ¶ˆå¤„ç† |
| ç§»åŠ¨ç«¯é€‚é… | ä¾§è¾¹æ å¯æŠ˜å ï¼Œå“åº”å¼å¸ƒå±€ |

---

## ğŸ¯ MVP ç›®æ ‡

ç¬¬ä¸€ç‰ˆèšç„¦æ ¸å¿ƒåŠŸèƒ½ï¼š

1. âœ… åŸºç¡€èŠå¤©ç•Œé¢
2. âœ… æµå¼å“åº”æ˜¾ç¤º
3. âœ… å•å¯¹è¯æŒä¹…åŒ–
4. âœ… ä¾§è¾¹æ é›†æˆ

åç»­è¿­ä»£ï¼š
- å¤šå¯¹è¯ç®¡ç†
- Markdown/ä»£ç é«˜äº®
- æ™ºèƒ½ä¸Šä¸‹æ–‡æ³¨å…¥
- å¯¹è¯å¯¼å‡º
