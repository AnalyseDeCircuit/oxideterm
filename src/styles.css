@import "tailwindcss";

/* ===== Font Declarations ===== */
/* 
 * Font Loading Strategy (v1.4.0+):
 * 1. System fonts are preferred (user may have Nerd Fonts installed)
 * 2. Bundled woff2 fonts serve as fallback for Nerd Font icons
 * 3. This reduces bundle size while ensuring icon compatibility
 */

/* JetBrains Mono Nerd Font (Bundled Subset) */
@font-face {
  font-family: 'JetBrains Mono NF (Subset)';
  src: url('/fonts/JetBrainsMono/JetBrainsMonoNerdFontMono-Subset-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono NF (Subset)';
  src: url('/fonts/JetBrainsMono/JetBrainsMonoNerdFontMono-Subset-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono NF (Subset)';
  src: url('/fonts/JetBrainsMono/JetBrainsMonoNerdFontMono-Subset-Italic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono NF (Subset)';
  src: url('/fonts/JetBrainsMono/JetBrainsMonoNerdFontMono-Subset-BoldItalic.woff2') format('woff2');
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

/* Meslo Nerd Font (Bundled Subset) */
@font-face {
  font-family: 'MesloLGM NF (Subset)';
  src: url('/fonts/Meslo/MesloLGMNerdFontMono-Subset-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGM NF (Subset)';
  src: url('/fonts/Meslo/MesloLGMNerdFontMono-Subset-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGM NF (Subset)';
  src: url('/fonts/Meslo/MesloLGMNerdFontMono-Subset-Italic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGM NF (Subset)';
  src: url('/fonts/Meslo/MesloLGMNerdFontMono-Subset-BoldItalic.woff2') format('woff2');
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

/* Maple Mono NF CN (Bundled Subset - CJK optimized) */
@font-face {
  font-family: 'Maple Mono NF CN (Subset)';
  src: url('/fonts/MapleMono/MapleMono-NF-CN-Subset-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Maple Mono NF CN (Subset)';
  src: url('/fonts/MapleMono/MapleMono-NF-CN-Subset-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Maple Mono NF CN (Subset)';
  src: url('/fonts/MapleMono/MapleMono-NF-CN-Subset-Italic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Maple Mono NF CN (Subset)';
  src: url('/fonts/MapleMono/MapleMono-NF-CN-Subset-BoldItalic.woff2') format('woff2');
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

@theme {
  /* Oxide-Industrial Palette (Legacy - mapped to dynamic theme variables) */
  --color-oxide-bg: var(--theme-bg);
  --color-oxide-panel: var(--theme-bg-panel);
  --color-oxide-border: var(--theme-border);
  --color-oxide-accent: var(--theme-accent);
  --color-oxide-accent-hover: var(--theme-accent-hover);
  --color-oxide-text: var(--theme-text);
  --color-oxide-text-muted: var(--theme-text-muted);

  /* Theme System Colors - Dynamically updated via CSS variables */
  --color-theme-bg: var(--theme-bg);
  --color-theme-bg-panel: var(--theme-bg-panel);
  --color-theme-bg-hover: var(--theme-bg-hover);
  --color-theme-border: var(--theme-border);
  --color-theme-text: var(--theme-text);
  --color-theme-text-muted: var(--theme-text-muted);
  --color-theme-accent: var(--theme-accent);
  --color-theme-accent-hover: var(--theme-accent-hover);

  /* Typography */
  --font-sans: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-mono: "JetBrains Mono", "SF Mono", "Fira Code", monospace;

  /* Spacing - High Density overrides if needed, or just use standard tight scales */

  /* Borders */
  --radius-sm: 2px;
  --radius-md: 0px;
  /* Force sharp corners generally */
  --radius-lg: 0px;
}

/* Reset & Base Styles */
:root {
  color-scheme: dark;
  --background: var(--color-oxide-bg);
  --foreground: var(--color-oxide-text);

  /* Terminal font - default, updated by settingsStore */
  --terminal-font-family: "JetBrainsMono Nerd Font", "JetBrainsMono Nerd Font Mono", "JetBrains Mono NF (Subset)", "JetBrains Mono", monospace;

  /* Theme Variables - Default Theme (Neutral) */
  --theme-bg: #09090b;
  --theme-bg-panel: #18181b;
  --theme-bg-hover: #27272a;
  --theme-border: #27272a;
  --theme-text: #f4f4f5;
  --theme-text-muted: #a1a1aa;
  --theme-accent: #ea580c;
  --theme-accent-hover: #c2410c;
}

/* Neutral Theme (Default) */
[data-theme="neutral"] {
  --theme-bg: #09090b;
  --theme-bg-panel: #18181b;
  --theme-bg-hover: #27272a;
  --theme-border: #27272a;
  --theme-text: #f4f4f5;
  --theme-text-muted: #a1a1aa;
  --theme-accent: #ea580c;
  --theme-accent-hover: #c2410c;
}

/* GitHub Dark Theme */
[data-theme="github-dark"] {
  --theme-bg: #0d1117;
  --theme-bg-panel: #161b22;
  --theme-bg-hover: #1c2128;
  --theme-border: #21262d;
  --theme-text: #f0f6fc;
  --theme-text-muted: #8b949e;
  --theme-accent: #58a6ff;
  --theme-accent-hover: #1f6feb;
}

/* Verdigris Theme */
[data-theme="verdigris"] {
  --theme-bg: #1C312C;
  --theme-bg-panel: #223D37;
  --theme-bg-hover: #2C4A42;
  --theme-border: #2C4A42;
  --theme-text: #2DD4BF;
  --theme-text-muted: #5FA69B;
  --theme-accent: #00FFFF;
  --theme-accent-hover: #66FFFF;
}

/* Silver Oxide Theme */
[data-theme="silver-oxide"] {
  --theme-bg: #1c1c1c;
  --theme-bg-panel: #2a2a2a;
  --theme-bg-hover: #3a3a3a;
  --theme-border: #3a3a3a;
  --theme-text: #dcdcdc;
  --theme-text-muted: #888888;
  --theme-accent: #9b88ff;
  --theme-accent-hover: #b0a3ff;
}

/* Cuprite Theme */
[data-theme="cuprite"] {
  --theme-bg: #221212;
  --theme-bg-panel: #331a1a;
  --theme-bg-hover: #442222;
  --theme-border: #442222;
  --theme-text: #f5d0c5;
  --theme-text-muted: #d4a0a0;
  --theme-accent: #ff4d4d;
  --theme-accent-hover: #ff6666;
}

/* Chromium Oxide Theme */
[data-theme="chromium-oxide"] {
  --theme-bg: #0e1a12;
  --theme-bg-panel: #16261b;
  --theme-bg-hover: #1e3626;
  --theme-border: #1e3626;
  --theme-text: #b8d8be;
  --theme-text-muted: #7a9c82;
  --theme-accent: #00ff41;
  --theme-accent-hover: #33ff66;
}

/* Paper Oxide Theme */
[data-theme="paper-oxide"] {
  --theme-bg: #f4f0e6;
  --theme-bg-panel: #ece8dd;
  --theme-bg-hover: #e4e0d5;
  --theme-border: #dcd8cc;
  --theme-text: #3c3c3c;
  --theme-text-muted: #787878;
  --theme-accent: #8d6e63;
  --theme-accent-hover: #795548;
}

/* Oxide Theme (Base Rust) */
[data-theme="oxide"] {
  --theme-bg: #331a0d;
  --theme-bg-panel: #4a2613;
  --theme-bg-hover: #5e311a;
  --theme-border: #63341b;
  --theme-text: #fef3e2;
  --theme-text-muted: #d4b49a;
  --theme-accent: #FF6B00;
  --theme-accent-hover: #ff8533;
}

/* Dracula Theme */
[data-theme="dracula"] {
  --theme-bg: #282a36;
  --theme-bg-panel: #21222c;
  /* Slightly darker than bg for contrast */
  --theme-bg-hover: #44475a;
  --theme-border: #44475a;
  --theme-text: #f8f8f2;
  --theme-text-muted: #6272a4;
  --theme-accent: #bd93f9;
  --theme-accent-hover: #ff79c6;
}

/* Nord Theme */
[data-theme="nord"] {
  --theme-bg: #2e3440;
  --theme-bg-panel: #3b4252;
  --theme-bg-hover: #434c5e;
  --theme-border: #434c5e;
  --theme-text: #d8dee9;
  --theme-text-muted: #4c566a;
  --theme-accent: #88c0d0;
  --theme-accent-hover: #81a1c1;
}

/* Solarized Dark Theme */
[data-theme="solarized-dark"] {
  --theme-bg: #002b36;
  --theme-bg-panel: #073642;
  --theme-bg-hover: #586e75;
  --theme-border: #073642;
  --theme-text: #839496;
  --theme-text-muted: #586e75;
  --theme-accent: #2aa198;
  --theme-accent-hover: #268bd2;
}

/* One Dark Theme */
[data-theme="one-dark"] {
  --theme-bg: #282c34;
  --theme-bg-panel: #21252b;
  --theme-bg-hover: #2c313a;
  --theme-border: #3e4451;
  --theme-text: #abb2bf;
  --theme-text-muted: #5c6370;
  --theme-accent: #61afef;
  --theme-accent-hover: #528bff;
}

/* Monokai Theme */
[data-theme="monokai"] {
  --theme-bg: #272822;
  --theme-bg-panel: #1e1f1c;
  --theme-bg-hover: #3e3d32;
  --theme-border: #3e3d32;
  --theme-text: #f8f8f2;
  --theme-text-muted: #75715e;
  --theme-accent: #a6e22e;
  --theme-accent-hover: #f92672;
}

/* Catppuccin Mocha Theme */
[data-theme="catppuccin-mocha"] {
  --theme-bg: #1e1e2e;
  --theme-bg-panel: #181825;
  --theme-bg-hover: #313244;
  --theme-border: #313244;
  --theme-text: #cdd6f4;
  --theme-text-muted: #6c7086;
  --theme-accent: #89b4fa;
  --theme-accent-hover: #b4befe;
}

/* Magnetite Theme */
[data-theme="magnetite"] {
  --theme-bg: #1A1A1A;
  --theme-bg-panel: #262626;
  --theme-bg-hover: #333333;
  --theme-border: #333333;
  --theme-text: #E5E7EB;
  --theme-text-muted: #9CA3AF;
  --theme-accent: #4682B4;
  --theme-accent-hover: #5A9BD6;
}

/* Cobalt Theme */
[data-theme="cobalt"] {
  --theme-bg: #0F172A;
  --theme-bg-panel: #1E293B;
  --theme-bg-hover: #334155;
  --theme-border: #334155;
  --theme-text: #CBD5E1;
  --theme-text-muted: #64748B;
  --theme-accent: #3B82F6;
  --theme-accent-hover: #60A5FA;
}

/* Ochre Theme */
[data-theme="ochre"] {
  --theme-bg: #1C1917;
  --theme-bg-panel: #292524;
  --theme-bg-hover: #44403C;
  --theme-border: #44403C;
  --theme-text: #FDE047;
  --theme-text-muted: #A8A29E;
  --theme-accent: #EA580C;
  --theme-accent-hover: #F97316;
}

/* Tokyo Night Theme */
[data-theme="tokyo-night"] {
  --theme-bg: #1a1b26;
  --theme-bg-panel: #16161e;
  /* Slightly darker than bg */
  --theme-bg-hover: #24283b;
  /* Lighter selection */
  --theme-border: #24283b;
  --theme-text: #c0caf5;
  --theme-text-muted: #565f89;
  --theme-accent: #7aa2f7;
  --theme-accent-hover: #bb9af7;
}

/* Gruvbox Dark Theme */
[data-theme="gruvbox-dark"] {
  --theme-bg: #282828;
  --theme-bg-panel: #1d2021;
  /* Hard dark */
  --theme-bg-hover: #3c3836;
  --theme-border: #3c3836;
  --theme-text: #ebdbb2;
  --theme-text-muted: #928374;
  --theme-accent: #d79921;
  /* Yellow */
  --theme-accent-hover: #fabd2f;
}

/* Rose Piné Theme */
[data-theme="rose-pine"] {
  --theme-bg: #191724;
  --theme-bg-panel: #1f1d2e;
  --theme-bg-hover: #26233a;
  --theme-border: #26233a;
  --theme-text: #e0def4;
  --theme-text-muted: #908caa;
  --theme-accent: #c4a7e7;
  /* Iris/Rose */
  --theme-accent-hover: #ebbcba;
}

/* Kanagawa Theme */
[data-theme="kanagawa"] {
  --theme-bg: #1F1F28;
  --theme-bg-panel: #16161D;
  --theme-bg-hover: #2A2A37;
  --theme-border: #2A2A37;
  --theme-text: #DCD7BA;
  --theme-text-muted: #727169;
  --theme-accent: #7E9CD8;
  /* Blue */
  --theme-accent-hover: #7FB4CA;
}

/* Synthwave '84 Theme */
[data-theme="synthwave-84"] {
  --theme-bg: #2b213a;
  /* Deep purple */
  --theme-bg-panel: #241b30;
  --theme-bg-hover: #453655;
  /* Lighter purple */
  --theme-border: #453655;
  --theme-text: #ffffff;
  --theme-text-muted: #8e83a3;
  --theme-accent: #ff7edb;
  /* Neon pink */
  --theme-accent-hover: #03edf9;
  /* Neon Cyan */
}

/* Azurite Theme */
[data-theme="azurite"] {
  --theme-bg: #091A2E;
  --theme-bg-panel: #0D2238;
  --theme-bg-hover: #163250;
  --theme-border: #163250;
  --theme-text: #C0D8F0;
  --theme-text-muted: #5D9CEC;
  --theme-accent: #0066CC;
  --theme-accent-hover: #4FC1E9;
}

/* Malachite Theme */
[data-theme="malachite"] {
  --theme-bg: #0B231A;
  --theme-bg-panel: #064E3B;
  --theme-bg-hover: #086047;
  --theme-border: #086047;
  --theme-text: #E0F2E9;
  --theme-text-muted: #34D399;
  --theme-accent: #10B981;
  --theme-accent-hover: #6EE7B7;
}

/* Hematite Theme */
[data-theme="hematite"] {
  --theme-bg: #1C1C1E;
  --theme-bg-panel: #2C2C2E;
  --theme-bg-hover: #3A3A3C;
  --theme-border: #3A3A3C;
  --theme-text: #D1D1D6;
  --theme-text-muted: #8E8E93;
  --theme-accent: #FF3B30;
  --theme-accent-hover: #FF453A;
}

/* Bismuth Theme */
[data-theme="bismuth"] {
  --theme-bg: #120F1D;
  --theme-bg-panel: #2E1065;
  --theme-bg-hover: #4C1D95;
  --theme-border: #4C1D95;
  --theme-text: #E9D5FF;
  --theme-text-muted: #A78BFA;
  --theme-accent: #D946EF;
  --theme-accent-hover: #E879F9;
}

/* Fairy Floss Theme */
[data-theme="fairy-floss"] {
  --theme-bg: #5a5475;
  /* Purple Haze */
  --theme-bg-panel: #463c57;
  --theme-bg-hover: #605770;
  --theme-border: #605770;
  --theme-text: #f8f8f2;
  --theme-text-muted: #e6c000;
  /* Yellow for contrast */
  --theme-accent: #ff857f;
  /* Salmon/Pink */
  --theme-accent-hover: #ffb8d9;
  /* Hot Pink */
}

/* Sakura Theme */
[data-theme="sakura"] {
  --theme-bg: #2c242a;
  /* Dark Cherry */
  --theme-bg-panel: #3f3238;
  --theme-bg-hover: #5c434f;
  --theme-border: #5c434f;
  --theme-text: #e6d2d9;
  --theme-text-muted: #958189;
  --theme-accent: #ff79c6;
  /* Pink */
  --theme-accent-hover: #ff92df;
  /* Bright Pink */
}

/* Hot Pink Theme - Light/Pastel Variant (Softer) */
[data-theme="hot-pink"] {
  --theme-bg: #efdfe5;
  /* Slightly darker/warmer pink */
  --theme-bg-panel: #fcebf1;
  /* Lighter panel as requested */
  --theme-bg-hover: #ebcbd6;
  /* Soft hover */
  --theme-border: #dcbcc6;
  /* Subtle border */
  --theme-text: #8a3a5b;
  /* Softer dark pink for text (readable but not harsh) */
  --theme-text-muted: #b0708a;
  --theme-accent: #e60073;
  /* Slightly deeper pink accent */
  --theme-accent-hover: #c20061;
}

/* 
  Spring Rice Theme
  春稻主题
  
  White·Gold·Blue gradient core:
  - White: Moonwhite #f0eeed / Frost white #f5f5fa (silver clouds)
  - Gold: Wheat gold #b49b64 / #c3aa73 (ripe grain)
  - Blue: Indigo #191978 / Navy #1e2350 / Sky blue #8ca0b4 (water and sky)
  
  Spring yellow-green #dcde78 as visual center, tricolor as structural accents
  Creating \"seedlings under skylight\" spring atmosphere
*/

[data-theme="spring-rice"] {
  /* ===== 背景层级 (春日梯田层次) ===== */
  /* 主背景：春日秧田，明确的青黄调 */
  --theme-bg: #e8ead0;
  /* 面板：阳光秧田，饱满的春芽黄绿 */
  --theme-bg-panel: #e6e8b8;
  /* 次级面板：水光映绿，带青调的淡绿 */
  --theme-bg-secondary: #dce8e0;
  /* 悬停：麦穗金晕，暖黄 */
  --theme-bg-hover: #e8dd98;
  /* 选中/激活：天水淡蓝 */
  --theme-bg-active: #d8e6f0;
  
  /* ===== 文字层级 (白金蓝渐变) ===== */
  /* 主文字：深藏蓝 */
  --theme-text: #1e2350;
  /* 次要文字：靛蓝灰 */
  --theme-text-secondary: #3a4080;
  /* 弱化文字：天青灰 */
  --theme-text-muted: #8ca0b4;
  /* 反白文字 (用于有色背景) */
  --theme-text-inverse: #fefefe;
  
  /* ===== 强调色 (春之华彩) ===== */
  /* 主强调：春芽黄 */
  --theme-accent: #dcde78;
  /* 强调悬停：淡麦金 */
  --theme-accent-hover: #d4c86e;
  /* 强调文字：深春芽 (降饱和) */
  --theme-accent-text: #5c5d2e;
  /* 次要强调：天青 */
  --theme-accent-secondary: #8ca0b4;
  /* 辅助强调：麦穗金 */
  --theme-accent-tertiary: #c3aa73;
  
  /* ===== 边框与分隔 (白金蓝水线) ===== */
  /* 主边框：天青水线 */
  --theme-border: #a8bcd0;
  /* 强边框：深靛蓝 */
  --theme-border-strong: #191978;
  /* 分隔线：麦田金 */
  --theme-divider: #d8d0a0;
  
  /* ===== 功能色 (五行配色) ===== */
  /* 成功：秧苗青 */
  --theme-success: #7db9a8;
  /* 警告：麦芒黄 */
  --theme-warning: #e6c888;
  /* 错误：土壤赭 (低饱和红) */
  --theme-error: #c97b63;
  /* 信息：深靛蓝 */
  --theme-info: #191978;
  
  /* ===== 特殊元素 ===== */
  /* 阴影：靛蓝冷调 */
  --theme-shadow: rgba(25, 25, 120, 0.06);
  --theme-shadow-colored: rgba(25, 25, 120, 0.15);
  
  /* 渐变：白·金·蓝 三色渐变 (用于 Hero/Header) */
  --theme-gradient-primary: linear-gradient(135deg, 
    #f5f5fa 0%,        /* 霜白 */
    #c3aa73 45%,       /* 麦金 */
    #191978 100%       /* 深靛蓝 */
  );
  
  /* 渐变：天光梯田 (用于 Card/Panel) */
  --theme-gradient-secondary: linear-gradient(180deg,
    #e6e8b8 0%,        /* 春芽黄绿 */
    #a8bcd0 100%       /* 天青蓝 */
  );
  
  /* 渐变：麦穗映蓝天 (用于 Button/Hover) */
  --theme-gradient-accent: linear-gradient(90deg,
    #dcde78 0%,        /* 春芽黄 */
    #c3aa73 50%,       /* 麦金 */
    #8ca0b4 100%       /* 天青 */
  );
}

/* Spring Green Theme - Light/Fresh Variant (Refined) */
[data-theme="spring-green"] {
  --theme-bg: #e2f5e9;
  /* Softer, slightly darker mint green */
  --theme-bg-panel: #d1efdb;
  /* Darker panel */
  --theme-bg-hover: #bfe9cc;
  /* Soft hover */
  --theme-border: #a3d9b5;
  /* Muted border */
  --theme-text: #1a4d33;
  /* Dark Green Text */
  --theme-text-muted: #3b7a5a;
  --theme-accent: #16a34a;
  /* Green 600 */
  --theme-accent-hover: #15803d;
}

body {
  background-color: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow: hidden;
  /* App-like feel */
  height: 100%;
}

html {
  height: 100%;
}

#root {
  height: 100%;
}

/* Scrollbar styling for WebKit - Modern & Theme-aware */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 10px;
}

/* Only show scrollbar thumb when the container is hovered */
*:hover::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--theme-text-muted), transparent 85%);
}

::-webkit-scrollbar-thumb:hover {
  background: color-mix(in srgb, var(--theme-text-muted), transparent 60%) !important;
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* Thin scrollbar for specialized components like TabBar */
.scrollbar-thin::-webkit-scrollbar {
  height: 3px;
  width: 3px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 0;
}

.scrollbar-thin:hover::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--theme-text-muted), transparent 80%);
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: var(--theme-accent) !important;
}

/* Always-visible scrollbar for file preview */
.scrollbar-visible::-webkit-scrollbar {
  width: 8px;
}

.scrollbar-visible::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.03);
  border-radius: 4px;
}

.scrollbar-visible::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.15);
  border-radius: 4px;
}

.scrollbar-visible::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3) !important;
}

/* Utility classes for the Industrial look */
.industrial-border {
  border: 1px solid var(--color-oxide-border);
}

.industrial-panel {
  background-color: var(--color-oxide-panel);
  border: 1px solid var(--color-oxide-border);
}

/* Terminal Pixel-Perfect Rendering */
.terminal-container {
  /* GPU acceleration for smooth rendering */
  transform: translateZ(0);
  backface-visibility: hidden;

  /* Contain layout recalculations */
  contain: layout style;

  /* Prevent text selection issues */
  user-select: none;
}

/* xterm.js specific optimizations */
.xterm {
  /* Use antialiased rendering for clear text */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* Ensure monospace grid integrity - CRITICAL */
  letter-spacing: 0 !important;
  word-spacing: 0 !important;
}

.xterm-viewport {
  /* Prevent scroll-induced repaints */
  contain: layout style;
}

.xterm-screen {
  /* Let xterm.js handle canvas sizing */
}

.xterm canvas {
  /* WebGL addon handles DPI scaling internally */
}

/* Data Visualization Animations */
@keyframes pulse-subtle {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.6;
  }
}

.animate-pulse-subtle {
  animation: pulse-subtle 3s ease-in-out infinite;
}

/* ═══════════════════════════════════════════════════════════════════════════
   Audio Player — Vinyl Disk & Volume Slider
   ═══════════════════════════════════════════════════════════════════════════ */

/* Vinyl record rotation */
@keyframes vinyl-spin {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

.audio-vinyl-disk {
  will-change: transform;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
}

.audio-vinyl-spin {
  animation: vinyl-spin 3s linear infinite;
}

/* Pause the rotation when not spinning (preserves angle) */
.audio-vinyl-disk:not(.audio-vinyl-spin) {
  animation: vinyl-spin 3s linear infinite paused;
}

/* Subtle outer glow ring — uses theme accent via CSS var */
@keyframes vinyl-glow {

  0%,
  100% {
    opacity: 0.2;
    box-shadow: 0 0 16px 3px var(--theme-accent, #ea580c);
  }

  50% {
    opacity: 0.4;
    box-shadow: 0 0 24px 6px var(--theme-accent, #ea580c);
  }
}

.audio-vinyl-glow {
  animation: vinyl-glow 2.5s ease-in-out infinite;
  border-radius: 50%;
}

/* Volume range slider — consistent cross-browser styling */
.audio-volume-slider {
  -webkit-appearance: none;
  appearance: none;
  background: var(--theme-border, #27272a);
  border-radius: 9999px;
  outline: none;
}

.audio-volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--theme-accent, #ea580c);
  cursor: pointer;
  border: none;
  margin-top: -3px;
  /* centre 10px thumb on 4px track */
}

.audio-volume-slider::-moz-range-thumb {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--theme-accent, #ea580c);
  cursor: pointer;
  border: none;
}

.audio-volume-slider::-webkit-slider-runnable-track {
  height: 4px;
  border-radius: 9999px;
  background: var(--theme-border, #27272a);
}

.audio-volume-slider::-moz-range-track {
  height: 4px;
  border-radius: 9999px;
  background: var(--theme-border, #27272a);
}

/* ═══════════════════════════════════════════════════════════════════════════
   Topology View Animations (replacing framer-motion)
   ═══════════════════════════════════════════════════════════════════════════ */

/* Node enter animation — spring-like scale from 0 */
@keyframes topo-enter {
  0% {
    transform: scale(0);
    opacity: 0;
  }

  70% {
    transform: scale(1.05);
    opacity: 1;
  }

  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.topo-node-enter {
  animation: topo-enter 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Connecting state — pulsing glow on box-shadow */
@keyframes topo-glow-pulse {

  0%,
  100% {
    box-shadow: 0 0 10px currentColor;
  }

  50% {
    box-shadow: 0 0 25px currentColor;
  }
}

.topo-connecting-glow {
  animation: topo-glow-pulse 1.5s ease-in-out infinite;
}

/* Status dot pulse (scale + opacity) */
@keyframes topo-dot-pulse-kf {

  0%,
  100% {
    transform: scale(1);
    opacity: 1;
  }

  50% {
    transform: scale(1.4);
    opacity: 0.5;
  }
}

.topo-dot-pulse {
  animation: topo-dot-pulse-kf infinite ease-in-out;
  /* animation-duration set via inline style */
}

/* Error shake */
@keyframes topo-shake-kf {

  0%,
  80%,
  100% {
    transform: translateX(0);
  }

  10% {
    transform: translateX(-2px);
  }

  30% {
    transform: translateX(2px);
  }

  50% {
    transform: translateX(-2px);
  }

  70% {
    transform: translateX(0);
  }
}

.topo-shake {
  animation: topo-shake-kf 2.5s ease-in-out infinite;
}

/* Success flash */
@keyframes topo-flash-kf {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }

  40% {
    opacity: 1;
    transform: scale(1.1);
  }

  100% {
    opacity: 0;
    transform: scale(1);
  }
}

.topo-success-flash {
  animation: topo-flash-kf 0.8s ease-out forwards;
}

/* Menu enter */
@keyframes topo-menu-enter-kf {
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-10px);
  }

  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.topo-menu-enter {
  animation: topo-menu-enter-kf 0.15s ease-out forwards;
}

/* AI Inline Panel Loading Animation */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }

  100% {
    transform: translateX(200%);
  }
}

.animate-shimmer {
  animation: shimmer 1.5s ease-in-out infinite;
  width: 50%;
}

/* ═══════════════════════════════════════════════════════════════════════════
   QuickLook Resizable Window - IDE-Style Minimal Grip
   ═══════════════════════════════════════════════════════════════════════════ */

.quicklook-resizable {
  resize: both;
  /* Use 'hidden' instead of 'auto' to avoid showing scrollbars on the outer container */
  /* The inner content area handles its own scrolling */
  overflow: hidden;
  position: relative;
}

/* Make the native resize handle invisible but FUNCTIONAL */
.quicklook-resizable::-webkit-resizer {
  /* Don't use display:none - it kills the drag zone! */
  background: transparent;
  border: none;
}

/* IDE-style minimal grip - subtle corner indicator */
.quicklook-resizable::after {
  content: '';
  position: absolute;
  right: 3px;
  bottom: 3px;
  width: 10px;
  height: 10px;
  /* CRITICAL: Let clicks pass through to the native resizer underneath */
  pointer-events: none;
  z-index: 50;
  /* Three subtle diagonal lines */
  background:
    linear-gradient(-45deg,
      transparent 0%,
      transparent 30%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 30%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 35%,
      transparent 35%,
      transparent 50%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 50%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 55%,
      transparent 55%,
      transparent 70%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 70%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 75%,
      transparent 75%);
  opacity: 0.5;
  transition: opacity 0.2s ease;
}

/* Brighten on hover */
.quicklook-resizable:hover::after {
  opacity: 0.9;
}

/* ===== Background Image Transparency ===== */
/* When a view root has [data-bg-active], override the Tailwind color mapping
   variables to semi-transparent versions. --theme-bg stays untouched as source
   of truth; only --color-theme-bg/panel/hover (what bg-theme-* utilities read)
   get alpha. All overrides use a unified 40% alpha for visual consistency. */
[data-bg-active] {
  --color-theme-bg: color-mix(in srgb, var(--theme-bg) 40%, transparent);
  --color-theme-bg-panel: color-mix(in srgb, var(--theme-bg-panel) 40%, transparent);
  --color-theme-bg-hover: color-mix(in srgb, var(--theme-bg-hover) 50%, transparent);
  --color-theme-border: color-mix(in srgb, var(--theme-border) 75%, transparent);
}

/* Hardcoded bg-zinc-* used in FileList, ForwardsView etc. — same 40% alpha */
[data-bg-active] .bg-zinc-900 {
  background-color: rgb(24 24 27 / 0.4) !important;
}

[data-bg-active] .bg-zinc-900\/50 {
  background-color: rgb(24 24 27 / 0.25) !important;
}

[data-bg-active] .bg-zinc-900\/30 {
  background-color: rgb(24 24 27 / 0.15) !important;
}

[data-bg-active] .bg-zinc-800\/50 {
  background-color: rgb(39 39 42 / 0.25) !important;
}

[data-bg-active] .bg-zinc-950 {
  background-color: rgb(9 9 11 / 0.4) !important;
}

[data-bg-active] .bg-zinc-950\/50 {
  background-color: rgb(9 9 11 / 0.25) !important;
}

[data-bg-active] .bg-zinc-700 {
  background-color: rgb(63 63 70 / 0.4) !important;
}

[data-bg-active] .bg-black {
  background-color: rgb(0 0 0 / 0.4) !important;
}

/* CodeMirror: gutters, active line gutter, and status bar use raw CSS vars
   that bypass Tailwind mapping — override them directly. */
[data-bg-active] .cm-gutters {
  background-color: color-mix(in srgb, var(--theme-bg-panel) 30%, transparent) !important;
}

[data-bg-active] .cm-activeLineGutter {
  background-color: color-mix(in srgb, var(--theme-accent) 40%, transparent) !important;
}

/* Topology SVG background rects */
[data-bg-active] .topo-bg-fill {
  opacity: 0.15;
}

/* Topology page: header should be less transparent, content more transparent */
[data-bg-active] .topo-header {
  background-color: color-mix(in srgb, var(--theme-bg-panel) 70%, transparent) !important;
}

[data-bg-active] .topo-content {
  background-color: color-mix(in srgb, var(--theme-bg) 20%, transparent) !important;
}