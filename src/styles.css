@import "tailwindcss";

/* ===== Font Declarations ===== */
/* 
 * Font Loading Strategy (v1.4.0+):
 * 1. System fonts are preferred (user may have Nerd Fonts installed)
 * 2. Bundled woff2 fonts serve as fallback for Nerd Font icons
 * 3. This reduces bundle size while ensuring icon compatibility
 */

/* JetBrains Mono Nerd Font (Bundled Fallback) */
@font-face {
  font-family: 'JetBrains Mono NF';
  src: url('/fonts/JetBrainsMono/JetBrainsMonoNerdFontMono-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono NF';
  src: url('/fonts/JetBrainsMono/JetBrainsMonoNerdFontMono-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono NF';
  src: url('/fonts/JetBrainsMono/JetBrainsMonoNerdFontMono-Italic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono NF';
  src: url('/fonts/JetBrainsMono/JetBrainsMonoNerdFontMono-BoldItalic.woff2') format('woff2');
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

/* Meslo Nerd Font (Bundled Fallback) */
@font-face {
  font-family: 'MesloLGM NF';
  src: url('/fonts/Meslo/MesloLGMNerdFontMono-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGM NF';
  src: url('/fonts/Meslo/MesloLGMNerdFontMono-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGM NF';
  src: url('/fonts/Meslo/MesloLGMNerdFontMono-Italic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'MesloLGM NF';
  src: url('/fonts/Meslo/MesloLGMNerdFontMono-BoldItalic.woff2') format('woff2');
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

/* Maple Mono NF CN (Bundled - CJK optimized) */
@font-face {
  font-family: 'Maple Mono NF CN';
  src: url('/fonts/MapleMono/MapleMono-NF-CN-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Maple Mono NF CN';
  src: url('/fonts/MapleMono/MapleMono-NF-CN-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Maple Mono NF CN';
  src: url('/fonts/MapleMono/MapleMono-NF-CN-Italic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Maple Mono NF CN';
  src: url('/fonts/MapleMono/MapleMono-NF-CN-BoldItalic.woff2') format('woff2');
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

@theme {
  /* Oxide-Industrial Palette (Legacy - mapped to dynamic theme variables) */
  --color-oxide-bg: var(--theme-bg);
  --color-oxide-panel: var(--theme-bg-panel);
  --color-oxide-border: var(--theme-border);
  --color-oxide-accent: var(--theme-accent);
  --color-oxide-accent-hover: var(--theme-accent-hover);
  --color-oxide-text: var(--theme-text);
  --color-oxide-text-muted: var(--theme-text-muted);

  /* Theme System Colors - Dynamically updated via CSS variables */
  --color-theme-bg: var(--theme-bg);
  --color-theme-bg-panel: var(--theme-bg-panel);
  --color-theme-bg-hover: var(--theme-bg-hover);
  --color-theme-border: var(--theme-border);
  --color-theme-text: var(--theme-text);
  --color-theme-text-muted: var(--theme-text-muted);
  --color-theme-accent: var(--theme-accent);
  --color-theme-accent-hover: var(--theme-accent-hover);

  /* Typography */
  --font-sans: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-mono: "JetBrains Mono", "SF Mono", "Fira Code", monospace;

  /* Spacing - High Density overrides if needed, or just use standard tight scales */

  /* Borders */
  --radius-sm: 2px;
  --radius-md: 0px;
  /* Force sharp corners generally */
  --radius-lg: 0px;
}

/* Reset & Base Styles */
:root {
  color-scheme: dark;
  --background: var(--color-oxide-bg);
  --foreground: var(--color-oxide-text);
  
  /* Terminal font - default, updated by settingsStore */
  --terminal-font-family: "JetBrainsMono Nerd Font", "JetBrainsMono Nerd Font Mono", "JetBrains Mono NF", "JetBrains Mono", monospace;

  /* Theme Variables - Default Theme (Neutral) */
  --theme-bg: #09090b;
  --theme-bg-panel: #18181b;
  --theme-bg-hover: #27272a;
  --theme-border: #27272a;
  --theme-text: #f4f4f5;
  --theme-text-muted: #a1a1aa;
  --theme-accent: #ea580c;
  --theme-accent-hover: #c2410c;
}

/* Neutral Theme (Default) */
[data-theme="neutral"] {
  --theme-bg: #09090b;
  --theme-bg-panel: #18181b;
  --theme-bg-hover: #27272a;
  --theme-border: #27272a;
  --theme-text: #f4f4f5;
  --theme-text-muted: #a1a1aa;
  --theme-accent: #ea580c;
  --theme-accent-hover: #c2410c;
}

/* Oxide Theme (Vibrant Rust Orange) */
[data-theme="oxide"] {
  --theme-bg: #331a0d;
  --theme-bg-panel: #4d2414;
  --theme-bg-hover: #663018;
  --theme-border: #663018;
  --theme-text: #fef3e2;
  --theme-text-muted: #d4a574;
  --theme-accent: #FF6B00;
  --theme-accent-hover: #FF8533;
}

/* Dracula Theme */
[data-theme="dracula"] {
  --theme-bg: #282a36;
  --theme-bg-panel: #34354a;
  --theme-bg-hover: #44475a;
  --theme-border: #44475a;
  --theme-text: #f8f8f2;
  --theme-text-muted: #6272a4;
  --theme-accent: #bd93f9;
  --theme-accent-hover: #9572d4;
}

/* Nord Theme */
[data-theme="nord"] {
  --theme-bg: #2e3440;
  --theme-bg-panel: #3b4252;
  --theme-bg-hover: #434c5e;
  --theme-border: #3b4252;
  --theme-text: #eceff4;
  --theme-text-muted: #81a1c1;
  --theme-accent: #88c0d0;
  --theme-accent-hover: #5e81ac;
}

/* Solarized Dark Theme */
[data-theme="solarized-dark"] {
  --theme-bg: #002b36;
  --theme-bg-panel: #073642;
  --theme-bg-hover: #0a4a58;
  --theme-border: #073642;
  --theme-text: #fdf6e3;
  --theme-text-muted: #93a1a1;
  --theme-accent: #268bd2;
  --theme-accent-hover: #2aa198;
}

/* Monokai Theme */
[data-theme="monokai"] {
  --theme-bg: #272822;
  --theme-bg-panel: #34352a;
  --theme-bg-hover: #49483e;
  --theme-border: #49483e;
  --theme-text: #f8f8f2;
  --theme-text-muted: #75715e;
  --theme-accent: #66d9ef;
  --theme-accent-hover: #a6e22e;
}

/* GitHub Dark Theme */
[data-theme="github-dark"] {
  --theme-bg: #0d1117;
  --theme-bg-panel: #161b22;
  --theme-bg-hover: #1c2128;
  --theme-border: #21262d;
  --theme-text: #f0f6fc;
  --theme-text-muted: #8b949e;
  --theme-accent: #58a6ff;
  --theme-accent-hover: #1f6feb;
}

/* Verdigris Theme */
[data-theme="verdigris"] {
  --theme-bg: #1C312C;
  --theme-bg-panel: #223D37;
  --theme-bg-hover: #2C4A42;
  --theme-border: #2C4A42;
  --theme-text: #2DD4BF;
  --theme-text-muted: #5FA69B;
  --theme-accent: #00FFFF;
  --theme-accent-hover: #66FFFF;
}

/* Silver Oxide Theme */
[data-theme="silver-oxide"] {
  --theme-bg: #1c1c1c;
  --theme-bg-panel: #2a2a2a;
  --theme-bg-hover: #3a3a3a;
  --theme-border: #3a3a3a;
  --theme-text: #dcdcdc;
  --theme-text-muted: #888888;
  --theme-accent: #9b88ff;
  --theme-accent-hover: #b0a3ff;
}

/* Cuprite Theme */
[data-theme="cuprite"] {
  --theme-bg: #221212;
  --theme-bg-panel: #331a1a;
  --theme-bg-hover: #442222;
  --theme-border: #442222;
  --theme-text: #f5d0c5;
  --theme-text-muted: #d4a0a0;
  --theme-accent: #ff4d4d;
  --theme-accent-hover: #ff6666;
}

/* Chromium Oxide Theme */
[data-theme="chromium-oxide"] {
  --theme-bg: #0e1a12;
  --theme-bg-panel: #16261b;
  --theme-bg-hover: #1e3626;
  --theme-border: #1e3626;
  --theme-text: #b8d8be;
  --theme-text-muted: #7a9c82;
  --theme-accent: #00ff41;
  --theme-accent-hover: #33ff66;
}

/* Paper Oxide Theme */
[data-theme="paper-oxide"] {
  --theme-bg: #f4f0e6;
  --theme-bg-panel: #ece8dd;
  --theme-bg-hover: #e4e0d5;
  --theme-border: #dcd8cc;
  --theme-text: #3c3c3c;
  --theme-text-muted: #787878;
  --theme-accent: #8d6e63;
  --theme-accent-hover: #795548;
}

/* Oxide Theme (Base Rust) */
[data-theme="oxide"] {
  --theme-bg: #331a0d;
  --theme-bg-panel: #4a2613;
  --theme-bg-hover: #5e311a;
  --theme-border: #63341b;
  --theme-text: #fef3e2;
  --theme-text-muted: #d4b49a;
  --theme-accent: #FF6B00;
  --theme-accent-hover: #ff8533;
}

/* Dracula Theme */
[data-theme="dracula"] {
  --theme-bg: #282a36;
  --theme-bg-panel: #21222c;
  /* Slightly darker than bg for contrast */
  --theme-bg-hover: #44475a;
  --theme-border: #44475a;
  --theme-text: #f8f8f2;
  --theme-text-muted: #6272a4;
  --theme-accent: #bd93f9;
  --theme-accent-hover: #ff79c6;
}

/* Nord Theme */
[data-theme="nord"] {
  --theme-bg: #2e3440;
  --theme-bg-panel: #3b4252;
  --theme-bg-hover: #434c5e;
  --theme-border: #434c5e;
  --theme-text: #d8dee9;
  --theme-text-muted: #4c566a;
  --theme-accent: #88c0d0;
  --theme-accent-hover: #81a1c1;
}

/* Solarized Dark Theme */
[data-theme="solarized-dark"] {
  --theme-bg: #002b36;
  --theme-bg-panel: #073642;
  --theme-bg-hover: #586e75;
  --theme-border: #073642;
  --theme-text: #839496;
  --theme-text-muted: #586e75;
  --theme-accent: #2aa198;
  --theme-accent-hover: #268bd2;
}

/* One Dark Theme */
[data-theme="one-dark"] {
  --theme-bg: #282c34;
  --theme-bg-panel: #21252b;
  --theme-bg-hover: #2c313a;
  --theme-border: #3e4451;
  --theme-text: #abb2bf;
  --theme-text-muted: #5c6370;
  --theme-accent: #61afef;
  --theme-accent-hover: #528bff;
}

/* Monokai Theme */
[data-theme="monokai"] {
  --theme-bg: #272822;
  --theme-bg-panel: #1e1f1c;
  --theme-bg-hover: #3e3d32;
  --theme-border: #3e3d32;
  --theme-text: #f8f8f2;
  --theme-text-muted: #75715e;
  --theme-accent: #a6e22e;
  --theme-accent-hover: #f92672;
}

/* Catppuccin Mocha Theme */
[data-theme="catppuccin-mocha"] {
  --theme-bg: #1e1e2e;
  --theme-bg-panel: #181825;
  --theme-bg-hover: #313244;
  --theme-border: #313244;
  --theme-text: #cdd6f4;
  --theme-text-muted: #6c7086;
  --theme-accent: #89b4fa;
  --theme-accent-hover: #b4befe;
}

/* Magnetite Theme */
[data-theme="magnetite"] {
  --theme-bg: #1A1A1A;
  --theme-bg-panel: #262626;
  --theme-bg-hover: #333333;
  --theme-border: #333333;
  --theme-text: #E5E7EB;
  --theme-text-muted: #9CA3AF;
  --theme-accent: #4682B4;
  --theme-accent-hover: #5A9BD6;
}

/* Cobalt Theme */
[data-theme="cobalt"] {
  --theme-bg: #0F172A;
  --theme-bg-panel: #1E293B;
  --theme-bg-hover: #334155;
  --theme-border: #334155;
  --theme-text: #CBD5E1;
  --theme-text-muted: #64748B;
  --theme-accent: #3B82F6;
  --theme-accent-hover: #60A5FA;
}

/* Ochre Theme */
[data-theme="ochre"] {
  --theme-bg: #1C1917;
  --theme-bg-panel: #292524;
  --theme-bg-hover: #44403C;
  --theme-border: #44403C;
  --theme-text: #FDE047;
  --theme-text-muted: #A8A29E;
  --theme-accent: #EA580C;
  --theme-accent-hover: #F97316;
}

body {
  background-color: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow: hidden;
  /* App-like feel */
}

/* Scrollbar styling for WebKit - Modern & Theme-aware */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 10px;
}

/* Only show scrollbar thumb when the container is hovered */
*:hover::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--theme-text-muted), transparent 85%);
}

::-webkit-scrollbar-thumb:hover {
  background: color-mix(in srgb, var(--theme-text-muted), transparent 60%) !important;
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* Thin scrollbar for specialized components like TabBar */
.scrollbar-thin::-webkit-scrollbar {
  height: 3px;
  width: 3px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 0;
}

.scrollbar-thin:hover::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--theme-text-muted), transparent 80%);
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: var(--theme-accent) !important;
}

/* Utility classes for the Industrial look */
.industrial-border {
  border: 1px solid var(--color-oxide-border);
}

.industrial-panel {
  background-color: var(--color-oxide-panel);
  border: 1px solid var(--color-oxide-border);
}

/* Terminal Pixel-Perfect Rendering */
.terminal-container {
  /* GPU acceleration for smooth rendering */
  transform: translateZ(0);
  backface-visibility: hidden;

  /* Contain layout recalculations */
  contain: layout style;

  /* Prevent text selection issues */
  user-select: none;
}

/* xterm.js specific optimizations */
.xterm {
  /* Use antialiased rendering for clear text */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* Ensure monospace grid integrity - CRITICAL */
  letter-spacing: 0 !important;
  word-spacing: 0 !important;
}

.xterm-viewport {
  /* Prevent scroll-induced repaints */
  contain: layout style;
}

.xterm-screen {
  /* Let xterm.js handle canvas sizing */
}

.xterm canvas {
  /* WebGL addon handles DPI scaling internally */
}

/* Data Visualization Animations */
@keyframes pulse-subtle {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.6;
  }
}

.animate-pulse-subtle {
  animation: pulse-subtle 3s ease-in-out infinite;
}

/* AI Inline Panel Loading Animation */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(200%);
  }
}

.animate-shimmer {
  animation: shimmer 1.5s ease-in-out infinite;
  width: 50%;
}

/* ═══════════════════════════════════════════════════════════════════════════
   QuickLook Resizable Window - IDE-Style Minimal Grip
   ═══════════════════════════════════════════════════════════════════════════ */

.quicklook-resizable {
  resize: both;
  /* Use 'hidden' instead of 'auto' to avoid showing scrollbars on the outer container */
  /* The inner content area handles its own scrolling */
  overflow: hidden;
  position: relative;
}

/* Make the native resize handle invisible but FUNCTIONAL */
.quicklook-resizable::-webkit-resizer {
  /* Don't use display:none - it kills the drag zone! */
  background: transparent;
  border: none;
}

/* IDE-style minimal grip - subtle corner indicator */
.quicklook-resizable::after {
  content: '';
  position: absolute;
  right: 3px;
  bottom: 3px;
  width: 10px;
  height: 10px;
  /* CRITICAL: Let clicks pass through to the native resizer underneath */
  pointer-events: none;
  z-index: 50;
  /* Three subtle diagonal lines */
  background:
    linear-gradient(
      -45deg,
      transparent 0%,
      transparent 30%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 30%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 35%,
      transparent 35%,
      transparent 50%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 50%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 55%,
      transparent 55%,
      transparent 70%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 70%,
      var(--theme-text-muted, rgba(161, 161, 170, 0.4)) 75%,
      transparent 75%
    );
  opacity: 0.5;
  transition: opacity 0.2s ease;
}

/* Brighten on hover */
.quicklook-resizable:hover::after {
  opacity: 0.9;
}